<?xml version="1.0" encoding="utf-8" ?>

<Patch>

	<!-- ID: 2552623545 (Eccentric Tech - Core) -->
	<Operation Class="PatchOperationFindMod">
		<mods>
			<li>Eccentric Tech - Core</li>
		</mods>
		<match Class="PatchOperationSequence">
			<operations>
				
				<!-- Fix ships craft. Need Aurora core -->
				<li Class="PatchOperationAdd">
					<xpath>/Defs/ResearchProjectDef[defName="ShipEngine" or defName="ShipReactor" or defName="ShipCryptosleep" or defName="ShipSensorCluster"]</xpath>
					<value>
						<requiredResearchFacilities>
							<li>MultiAnalyzer</li>
							<li>EccentricAuroraCore</li>
						</requiredResearchFacilities>
					</value>
				</li>
				<li Class="PatchOperationReplace">
					<xpath>/Defs/ResearchProjectDef[defName="ShipBasics"]/baseCost</xpath>
					<value>
						<baseCost>2000</baseCost>
					</value>
				</li>
				<li Class="PatchOperationReplace">
					<xpath>/Defs/ResearchProjectDef[defName="ShipEngine"]/baseCost</xpath>
					<value>
						<baseCost>8000</baseCost>
					</value>
				</li>
				<li Class="PatchOperationReplace">
					<xpath>/Defs/ResearchProjectDef[defName="ShipReactor"]/baseCost</xpath>
					<value>
						<baseCost>18000</baseCost>
					</value>
				</li>
				<li Class="PatchOperationReplace">
					<xpath>/Defs/ResearchProjectDef[defName="ShipSensorCluster"]/baseCost</xpath>
					<value>
						<baseCost>8000</baseCost>
					</value>
				</li>
				<li Class="PatchOperationReplace">
					<xpath>/Defs/ResearchProjectDef[defName="ShipCryptosleep"]/baseCost</xpath>
					<value>
						<baseCost>5000</baseCost>
					</value>
				</li>
				
				<!-- Add AIPersonaCore -->
				<li Class="PatchOperationAdd">
					<xpath>/Defs</xpath>
					<value>
						<ResearchProjectDef ParentName="ShipResearchProjectBase">
							<defName>CreateComputerCore</defName>
							<label>AI Computer Core</label>
							<description>Create AI Computer Core</description>
							<baseCost>2000</baseCost>
							<techLevel>Spacer</techLevel>
							<prerequisites>
								<li>ShipComputerCore</li>
							</prerequisites>
						</ResearchProjectDef>
					</value>
				</li>
				<li Class="PatchOperationAdd">
					<xpath>/Defs/ThingDef[defName="AIPersonaCore"]</xpath>
					<value>
						<costList>
							<Gold>25</Gold>
							<Steel>1000</Steel>
							<Plasteel>150</Plasteel>
							<ComponentSpacer>20</ComponentSpacer>
							<ComponentIndustrial>50</ComponentIndustrial>
						</costList>
						<recipeMaker>
							<workSpeedStat>GeneralLaborSpeed</workSpeedStat>
							<unfinishedThingDef>UnfinishedComponent</unfinishedThingDef>
							<workSkill>Crafting</workSkill>
							<effectWorking>Smith</effectWorking>
							<researchPrerequisite>CreateComputerCore</researchPrerequisite>
							<recipeUsers>
								<li>FabricationBench</li>
							</recipeUsers>
							<skillRequirements>
								<Crafting>12</Crafting>
								<Intellectual>5</Intellectual>
							</skillRequirements>
						</recipeMaker>
					</value>
				</li>
				<li Class="PatchOperationReplace">
					<xpath>/Defs/ThingDef[defName="AIPersonaCore"]/statBases/MarketValue</xpath>
					<value>
						<MarketValue>15000</MarketValue>
					</value>
				</li>
				<li Class="PatchOperationAdd">
					<xpath>/Defs/ThingDef[defName="AIPersonaCore"]/statBases</xpath>
					<value>
						<WorkToMake>15000</WorkToMake>
					</value>
				</li>
				
				<li Class="PatchOperationRemove">
					<xpath>/Defs/ThingDef[defName="Eccentric_HexCell"]/tradeability</xpath>
				</li>
				<li Class="PatchOperationRemove">
					<xpath>/Defs/ThingDef[defName="Eccentric_Nanoweave"]/tradeability</xpath>
				</li>
				<li Class="PatchOperationAdd">
					<xpath>/Defs/TraderKindDef[defName="Orbital_BulkGoods" or defName="Visitor_Outlander_Standard"]/stockGenerators</xpath>
					<value>
						<li Class="StockGenerator_SingleDef">
							<thingDef>Eccentric_HexCell</thingDef>
							<countRange>1~5</countRange>
						</li>
					</value>
				</li>
				<li Class="PatchOperationAdd">
					<xpath>/Defs/TraderKindDef[defName="Orbital_BulkGoods" or defName="Visitor_Outlander_Standard"]/stockGenerators</xpath>
					<value>
						<li Class="StockGenerator_SingleDef">
							<thingDef>Eccentric_Nanoweave</thingDef>
							<countRange>50~200</countRange>
						</li>
					</value>
				</li>
				
			</operations>
		</match>
	</Operation>
	
	
	<!-- ID: 2585928816 (Eccentric Tech - Angel Apparel) -->
	<Operation Class="PatchOperationFindMod">
		<mods>
			<li>Eccentric Tech - Angel Apparel</li>
		</mods>
		<match Class="PatchOperationSequence">
			<operations>
				
				<!-- Trade -->
				<li Class="PatchOperationAdd">
					<xpath>/Defs/ThingDef[@Name="EccentricUniformBase" or @Name="EccentricUndersuitBase" or @Name="EccentricFrillBase" or @Name="EccentricApronBase"]</xpath>
					<value>
						<tradeTags>
							<li>HiTechArmor</li>
						</tradeTags>
					</value>
				</li>
				
				<li Class="PatchOperationAdd">
					<xpath>/Defs/TraderKindDef[defName="Orbital_BulkGoods"]/stockGenerators</xpath>
					<value>
						<li Class="StockGenerator_Tag">
							<tradeTag>HiTechArmor</tradeTag>
							<thingDefCountRange>1~2</thingDefCountRange>
							<countRange>1~2</countRange>
						</li>
					</value>
				</li>
				<li Class="PatchOperationAdd">
					<xpath>/Defs/TraderKindDef[defName="Visitor_Outlander_Standard"]/stockGenerators</xpath>
					<value>
						<li Class="StockGenerator_Tag">
							<tradeTag>HiTechArmor</tradeTag>
							<thingDefCountRange>0~1</thingDefCountRange>
							<countRange>1~2</countRange>
						</li>
					</value>
				</li>
				
			</operations>
		</match>
	</Operation>
	
	
	<!-- ID: 2552623545 (Eccentric Tech - Core) -->
	<Operation Class="PatchOperationFindMod">
		<mods>
			<li>Eccentric Tech - Core</li>
		</mods>
		
		<match Class="PatchOperationFindMod">
			<mods><li>Royalty</li></mods>
			<match Class="PatchOperationSequence">
				<operations>
					
					<li Class="PatchOperationAdd">
						<xpath>/Defs/TraderKindDef[defName="Base_Empire_Standard" or defName="Orbital_Empire"]/stockGenerators</xpath>
						<value>
							<li Class="StockGenerator_SingleDef">
								<thingDef>Eccentric_HexCell</thingDef>
								<countRange>1~5</countRange>
							</li>
						</value>
					</li>
					<li Class="PatchOperationAdd">
						<xpath>/Defs/TraderKindDef[defName="Base_Empire_Standard" or defName="Orbital_Empire"]/stockGenerators</xpath>
						<value>
							<li Class="StockGenerator_SingleDef">
								<thingDef>Eccentric_Nanoweave</thingDef>
								<countRange>50~200</countRange>
							</li>
						</value>
					</li>
					
				</operations>
			</match>
		</match>
		
	</Operation>
	
	
	<!-- ID: 2585928816 (Eccentric Tech - Angel Apparel) -->
	<Operation Class="PatchOperationFindMod">
		<mods>
			<li>Eccentric Tech - Angel Apparel</li>
		</mods>
		
		<match Class="PatchOperationFindMod">
			<mods><li>Royalty</li></mods>
			<match Class="PatchOperationSequence">
				<operations>
					
					<!-- Add Prestige Tag -->
					<li Class="PatchOperationAdd">
						<xpath>/Defs/ThingDef[@Name="EccentricUniformBase" or @Name="EccentricUndersuitBase"]/apparel/tags</xpath>
						<value>
							<li>PrestigeCombatGear</li>
						</value>
					</li>
					
					<!-- Trade -->
					<li Class="PatchOperationReplace">
						<xpath>/Defs/TraderKindDef[defName="Base_Empire_Standard" or defName="Orbital_Empire"]/stockGenerators/li[tradeTag="HiTechArmor"]</xpath>
						<value>
							<li Class="StockGenerator_Tag">
								<tradeTag>HiTechArmor</tradeTag>
								<thingDefCountRange>4~8</thingDefCountRange>
								<countRange>1~2</countRange>
							</li>
						</value>
					</li>
					
				</operations>
			</match>
		</match>
		
	</Operation>
	
</Patch>